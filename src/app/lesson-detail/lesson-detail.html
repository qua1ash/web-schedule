<div class="lesson-detail">
  <div class="header">
    <h2>{{ lessonDetail?.title }}</h2>
    <div class="time-info">
      <p class="time">Время: <strong>{{ lessonDetail?.start }} - {{ lessonDetail?.end }}</strong></p>
    </div>
    <p>Аудитория: <strong>{{ lessonDetail?.room }}</strong></p>
    <p>Преподаватель: <strong>{{ lessonDetail?.teacher }}</strong></p>
  </div>

  <div class="homework">
    <h3>Домашнее задание</h3>
    <div *ngIf="isLoading" style="text-align: center; padding: 20px;">
      Загрузка...
    </div>
    <div *ngIf="!isLoading">
      <textarea
        *ngIf="data.isAdmin; else viewHomework"
        [(ngModel)]="homework"
        placeholder="Введите домашнее задание"
        rows="6"
        [disabled]="isSaving">
      </textarea>
      <ng-template #viewHomework>
        <textarea
          [value]="homework || 'Нет домашнего задания'"
          rows="6"
          disabled>
        </textarea>
      </ng-template>
      <button
        *ngIf="data.isAdmin"
        mat-raised-button
        color="primary"
        (click)="saveHomework()"
        [disabled]="isSaving"
        style="margin-top: 10px;">
        {{ isSaving ? 'Сохранение...' : 'Сохранить' }}
      </button>
      <button
        *ngIf="data.isEditor"
        mat-raised-button
        [color]="lessonDetail?.isCancelled ? 'primary' : 'warn'"
        (click)="toggleCancelLesson()"
        [disabled]="isDeleting"
        style="margin-top: 10px; margin-left: 10px;">
        {{ isDeleting ? 'Обработка...' : (lessonDetail?.isCancelled ? 'Восстановить пару' : 'Удалить пару') }}
      </button>
    </div>
  </div>
</div>
